openapi: 3.1.0
info:
  title: Example Write Endpoint Service API
  description: Accepts commands to register a user.
  version: "1.0"
paths:
  /commands/register-user/v1:
    post:
      operationId: registerUserV1
      summary: Submits a register user V1 command to register a new user.
      parameters:
        - $ref: '#/components/parameters/accept'
        - $ref: '#/components/parameters/contentLength'
      requestBody:
        description: Details of the new user to be registered.
        content:
          application/json:
            schema:
              $ref: '/api/schemas/json/RegisterUserCommandV1.json'
            example: { "email": { "address": "bruce@waynecorp.com" } }
        required: true
      responses:
        "202":
          $ref: '#/components/responses/Accepted'
        "400":
          $ref: '#/components/responses/BadRequest'
        422:
          $ref: '#/components/responses/UnprocessableEntity'
        500:
          $ref: '#/components/responses/UnexpectedError'
        502:
          $ref: '#/components/responses/BadGateway'
components:
  parameters:
    contentLength:
      name: content-length
      in: header
      description: Length of the request body
      required: true
      style: simple
      explode: false
      schema:
        minLength: 1
        type: string
    accept:
      name: Accept
      in: header
      description: The media type accepted by the client.
      required: false
      schema:
        type: string
  headers:
    location:
      schema:
        type: string
        minLength: 1
      required: true
      description: Location
    date:
      schema:
        type: string
        minLength: 1
      required: true
      description: Location
    connection:
      schema:
        type: string
        minLength: 1
      required: true
      description: Location
    transferEncoding:
      schema:
        type: string
        minLength: 1
      required: true
      description: Transfer encoding
    contentType:
      schema:
        type: string
        minLength: 1
      required: true
      description: Content type
    contentLength:
      schema:
        type: string
        minLength: 1
      required: true
      description: Content length
  responses:
    Accepted:
      description: The command was accepted.
      content:
        application/json:
          schema:
            $ref: '/api/schemas/json/RegisterUserCommandV1AcceptedResult.json'
          example: { "user": { "id": "01H8HBDMX0S2EGDTR7WAGK0SC7" } }
      headers:
        content-type:
          $ref: '#/components/headers/contentType'
        content-length:
          $ref: '#/components/headers/contentLength'
    BadRequest:
      description: The request could not be understood e.g., headers, query parameters or request body are malformed.
      content:
        text/plain:
          schema:
            type: string
          example: Something went wrong
      headers:
        content-type:
          $ref: '#/components/headers/contentType'
        content-length:
          $ref: '#/components/headers/contentLength'
    UnprocessableEntity:
      description: The request body violated domain constraints.
      content:
        application/json:
          schema:
            $ref: '/api/schemas/json/Error.json'
          example: { "message": "Something went wrong" }
      headers:
        content-type:
          $ref: '#/components/headers/contentType'
        content-length:
          $ref: '#/components/headers/contentLength'
    BadGateway:
      description: A dependent service is not responding.
      content:
        text/plain:
          schema:
            type: string
          example: Something went wrong
      headers:
        content-type:
          $ref: '#/components/headers/contentType'
        content-length:
          $ref: '#/components/headers/contentLength'
    UnexpectedError:
      description: Something went wrong unexpectedly.
      content:
        text/plain:
          schema:
            type: string
          example: Something went wrong
      headers:
        content-type:
          $ref: '#/components/headers/contentType'
        content-length:
          $ref: '#/components/headers/contentLength'